<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RGB Background Changer</title>
  <style>
    html,body {
      height: 100%;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    .app {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s linear;
      padding: 24px;
      box-sizing: border-box;
    }

    .card {
      background: rgba(255,255,255,0.88);
      backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      color: #000;
      max-width: 500px;
      width: 100%;
      text-align: center;
      display: none; /* default hidden */
    }

    h1 { margin: 0 0 10px; font-size: 20px; }
    .controls { display:flex; gap:10px; justify-content:center; margin:10px 0; flex-wrap:wrap; }
    .btn {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    .range { width: 200px; }
    .info { margin-top: 8px; font-family: monospace; }
  </style>
</head>
<body>
  <div id="app" class="app">
    <div class="card" id="panel">
      <h1>RGB Background Changer</h1>
      <div class="controls">
        <button id="toggle" class="btn">Pause</button>
        <input id="speed" class="range" type="range" min="0.1" max="3" step="0.05" value="1" />
        <button id="hide" class="btn">Hide</button>
      </div>
      <div class="info" id="colorText">rgb(0,0,0)</div>
    </div>
  </div>

  <script>
    const app = document.getElementById('app');
    const panel = document.getElementById('panel');
    const colorText = document.getElementById('colorText');
    const toggleBtn = document.getElementById('toggle');
    const hideBtn = document.getElementById('hide');
    const speedInput = document.getElementById('speed');

    let t = 0, running = true;

    const phases = { r: 0, g: Math.PI * 2/3, b: Math.PI * 4/3 };
    const sineToByte = s => Math.round(127.5 + 127.5 * s);

    function frame() {
      if (running) {
        const speed = parseFloat(speedInput.value) || 1;
        t += 0.016 * speed;
      }
      const freq = 0.7;
      const r = sineToByte(Math.sin(2 * Math.PI * freq * t + phases.r));
      const g = sineToByte(Math.sin(2 * Math.PI * freq * t + phases.g));
      const b = sineToByte(Math.sin(2 * Math.PI * freq * t + phases.b));
      const rgb = `rgb(${r},${g},${b})`;
      app.style.background = rgb;
      colorText.textContent = rgb;
      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);

    toggleBtn.addEventListener('click', () => {
      running = !running;
      toggleBtn.textContent = running ? "Pause" : "Play";
    });

    hideBtn.addEventListener('click', () => {
      panel.style.display = "none";
    });

    // --- Long press detection (2s) ---
    let pressTimer;
    document.addEventListener('mousedown', () => {
      pressTimer = setTimeout(() => {
        panel.style.display = "block";
      }, 2000);
    });
    document.addEventListener('mouseup', () => clearTimeout(pressTimer));
    document.addEventListener('mouseleave', () => clearTimeout(pressTimer));
    document.addEventListener('touchstart', () => {
      pressTimer = setTimeout(() => {
        panel.style.display = "block";
      }, 2000);
    });
    document.addEventListener('touchend', () => clearTimeout(pressTimer));
  </script>
</body>
</html>
